# GDB

就是用的不熟练，或者说，平时很少用到，但是单步调试可以很好的理解程序的流程。

使用才可能获得熟悉，基础知道了得使用啊。

* 设置断点
* 单步跟踪
* 分析内存，变量
* 查看函数调用栈帧



gcc/g++常用的编译选项：

|    选项    |               作用               |
| :--------: | :------------------------------: |
|     -E     |          生成预处理文件          |
|     -S     |           生成汇编文件           |
|     -c     |          生成可目标文件          |
|     -o     |       指定生成文件的文件名       |
|    -On     |         指定代码优化等级         |
|     -g     |       用于gdb调试、objdump       |
|   -Wall    |   显示代码中的所有warning行为    |
|     -w     |   禁止显示代码中的warning行为    |
|  -Werror   | 将代码中的warning行为视为为error |
|     -D     |           设置预定义宏           |
|     -l     |     链接（link）指定的函数库     |
| -std=c++11 |   指定编译代码的C++标准为C++11   |



```C++
// for -D
int main()
{
    #ifdef DEBUG
     std::cout<<"for debug"<<endl;
    #endif
    return 0;
}

g++ -DDEBUG main.cc -o main && ./main;

GCC的话，重要的是理解编译、链接，然后命令随时查看
```

## 常用总结

```bash
gdb ifindhq
b xxx.cpp:LineNo # 在某个文件的某一行打断点，这个倒是很好用！
r ./ifindhq -i3004 -l3004 #直接r加上参数
# 运行后对于网络服务器程序，一般会阻塞到某个地方，这个时候需要我们通过使用client来
# 使得程序能够正常的运行下去
# 这个时候就需要手动的让程序运行了，可以c n s b
c #run之后遇到断点，
```

**gdb调试一个后台程序：**

run之前一定打上断点，不然没法进行控制。

打断点的位置，可以是main（看函数的运行过程）；也可以是其他你知道的地方。
